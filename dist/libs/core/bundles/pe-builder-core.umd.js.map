{"version":3,"file":"pe-builder-core.umd.js","sources":["../../../../node_modules/tslib/tslib.es6.js","ng://@pe/builder-core/models/action.ts","ng://@pe/builder-core/models/client.ts","ng://@pe/builder-core/models/element.ts","ng://@pe/builder-core/constants.ts","ng://@pe/builder-core/shared/abstract.component.ts","ng://@pe/builder-core/abstract-api.service.ts","ng://@pe/builder-core/utils/create-logger.ts","ng://@pe/builder-core/utils/element-utils.ts","ng://@pe/builder-core/utils/generate-id.ts","ng://@pe/builder-core/actions/effects/context-schema.effects.ts","ng://@pe/builder-core/actions/effects/page.effects.ts","ng://@pe/builder-core/actions/effects/shop.effects.ts","ng://@pe/builder-core/actions/effects/stylesheet.effects.ts","ng://@pe/builder-core/actions/effects/template.effects.ts","ng://@pe/builder-core/actions/compiler.ts","ng://@pe/builder-core/actions/create-shop-init-action.ts","ng://@pe/builder-core/fixtures/element.fixtures.ts","ng://@pe/builder-core/fixtures/empty-shop.ts"],"sourcesContent":["/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator], i = 0;\r\n    if (m) return m.call(o);\r\n    return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n","export type PebActionId = string;\n\nexport interface PebAction {\n  id: PebActionId;\n  // TODO: add name\n  effects: PebEffect[];\n  createdAt: Date;\n}\n\nexport interface PebEffect {\n  type: PebShopEffect\n    | PebPageEffect\n    | PebTemplateEffect\n    | PebStylesheetEffect\n    | PebContextSchemaEffect;\n  target: string; // format: entityType:entityId\n  payload: any;\n}\n\nexport enum PebEffectTarget {\n  Shop = 'shop',\n  Pages = 'pages',\n  Templates = 'templates',\n  Stylesheets = 'stylesheets',\n  ContextSchemas = 'contextSchemas',\n}\n\nexport enum PebShopEffect {\n  Init = 'shop:init',\n  UpdateData = 'shop:update-data',\n  UpdatePages = 'shop:update-pages',\n  AppendPage = 'shop:append-page',\n  DeletePage = 'shop:delete-page',\n}\n\nexport enum PebPageEffect {\n  Create = 'page:init',\n  UpdateData = 'page:update-data',\n  Delete = 'page:delete',\n}\n\nexport enum PebTemplateEffect {\n  Init              = 'template:init',\n  Destroy           = 'template:destroy',\n  AppendElement     = 'template:append-element',\n  UpdateElement     = 'template:update-element',\n  RelocateElement   = 'template:relocate-element',\n  DeleteElement     = 'template:delete-element',\n}\n\nexport enum PebStylesheetEffect {\n  Init = 'stylesheet:init',\n  Update = 'stylesheet:update',\n  Delete = 'stylesheet:delete',\n}\n\nexport enum PebContextSchemaEffect {\n  Init = 'context-schema:init',\n  Update = 'context-schema:update',\n  Delete = 'context-schema:delete',\n}\n","import { InjectionToken } from '@angular/core';\n\nimport { PebActionId } from './action';\nimport { PebElement, PebElementType } from './element';\n\nexport type PebTemplateId = string;\nexport interface PebTemplate extends PebElement {\n  type: PebElementType.Document;\n}\n\nexport type PebStylesheetId = string;\nexport interface PebStylesheet {\n  [selector: string]: PebElementStyles;\n}\nexport interface PebElementStyles {\n  [style: string]: string | number;\n}\n\nexport type PebContextSchemaId = string;\nexport interface ContextSchemaItem {\n  service: string;\n  method: string;\n  params: any[];\n}\nexport interface PebContextSchema {\n  [key: string]: ContextSchemaItem;\n}\n\nexport enum PebPageType {\n  Master = 'master',\n  Replica = 'replica',\n}\n\nexport enum PebPageVariant {\n  Front = 'front',\n  Default = 'default',\n  Category = 'category',\n  Product = 'product',\n}\n\nexport type PebPageId = string;\nexport interface PebPage {\n  id: PebPageId;\n  name: string;\n  variant: PebPageVariant;\n  type: PebPageType;\n  master: null | {\n    id: PebPageId,\n    lastActionId: PebActionId\n  };\n  data: {\n    url?: string;\n    mark?: string;\n    preview?: string;\n  };\n  template: PebTemplate;\n  stylesheets: {\n    [screen: string]: PebStylesheet;\n  };\n  context: PebContextSchema;\n}\n\nexport type PebShopId = string;\nexport interface PebShop {\n  id: PebShopId;\n  data: {\n    frontPageId: PebPageId;\n  };\n  routing: {\n    [url: string]: PebPageId;\n  };\n  context: PebContextSchema;\n  pages: PebPage[];\n}\n\n// TODO: move to a more suitable location\nexport enum ContextService {\n  Company = 'company',\n  Products = 'products',\n  Shipments = 'shipments',\n}\n\n// TODO: move to a more suitable location\nexport const CONTEXT_SERVICES = {\n  [ContextService.Company]: new InjectionToken<any>('ContextServices.Company'),\n  [ContextService.Products]: new InjectionToken<any>('ContextServices.Products'),\n  [ContextService.Shipments]: new InjectionToken<any>('ContextServices.Shipments'),\n};\n","export type PebElementId = string;\n\nexport enum PebElementType {\n  Document = 'document',\n  Section = 'section',\n  Block = 'block',\n  Text = 'text',\n  Image = 'image',\n  Product = 'product',\n  ProductPage = 'productPage',\n  Button = 'button',\n  Cart = 'cart',\n  Shape = 'shape',\n  Carousel = 'carousel',\n  Amount = 'amount',\n  Logo = 'logo',\n  Products = 'shop-products',\n  Line = 'line',\n}\n\nexport enum PebMakerType {\n  Text = 'text',\n}\n\nexport interface PebElement {\n  id: PebElementId;\n  type: PebElementType;\n  children?: PebElement[];\n  data?: {\n    text?: string;\n    routes?: any[];\n    [others: string]: any;\n  };\n  meta?: {\n    deletable: boolean;\n  };\n}\n\nexport enum PebElementContextState {\n  Loading = 'loading',\n  Error = 'error',\n  Ready = 'ready',\n  Empty = 'empty',\n}\n\nexport interface PebElementWithParent extends PebElement {\n  priority: number;\n  parentId: string | null;\n}\n\nexport type PebElementContext<T> = {\n  state: PebElementContextState.Loading;\n} | {\n  state: PebElementContextState.Error;\n} | {\n  state: PebElementContextState.Empty;\n} | {\n  state: PebElementContextState.Ready;\n  data: T;\n};\n","export enum PebScreen {\n  Desktop = 'desktop',\n  Tablet = 'tablet',\n  Mobile = 'mobile',\n}\n","import { OnDestroy } from '@angular/core';\nimport { ReplaySubject } from 'rxjs';\n\nexport abstract class AbstractComponent implements OnDestroy {\n\n  protected destroyed$ = new ReplaySubject<boolean>();\n\n  ngOnDestroy(): void {\n    this.destroyed$.next(true);\n    this.destroyed$.complete();\n  }\n}\n","import { Observable } from 'rxjs';\n\nimport { PebAction } from './models/action';\nimport { PebShop, PebShopId } from './models/client';\nimport { PebShopThemeVersionEntity } from './models/database';\nimport { PebShopThemeId, PebShopThemeVersionId } from './models/editor';\n\nexport interface CreateShopThemePayload {\n  name: string;\n  content: PebShop;\n}\n\nexport type CreateShopThemeDto = any;\n\nexport abstract class PebApiService {\n  abstract getShopThemesList(): Observable<any>;\n\n  abstract getShopThemeById(themeId: PebShopThemeId): Observable<any>;\n\n  abstract createShopTheme(input: CreateShopThemePayload): Observable<CreateShopThemeDto>;\n\n  abstract createShopThemeVersion(shopId: PebShopId, name: string): Observable<PebShopThemeVersionEntity>;\n\n  abstract deleteShopThemeVersion(shopId: PebShopId, versionId: PebShopThemeVersionId): Observable<any>;\n\n  abstract activateShopThemeVersion(shopId: PebShopId, versionId: PebShopThemeVersionId): Observable<CreateShopThemeDto>;\n\n  abstract publishShopThemeVersion(shopId: PebShopId, versionId: PebShopThemeVersionId): Observable<any>;\n\n  abstract addAction(shopId: PebShopId, action: PebAction): Observable<any>;\n\n  abstract getShopThemeVersions(shopId: PebShopId): Observable<PebShopThemeVersionEntity[]>;\n\n  abstract updateReplica(themeId: string, oldInitAction: PebAction, newInitAction: PebAction): Observable<any>;\n\n  abstract undoAction(themeId: string): Observable<any>;\n}\n","const root: any = (typeof self === 'object' && self.self === self && self) ||\n  (typeof global === 'object' && global.global === global && global) ||\n  this;\n\nexport function pebCreateLogger(namespace: string): (...a: unknown[]) => unknown[] {\n  const acceptableNss = [\n    ...namespace\n      .split(':')\n      .map((el, i, all) =>\n        [...all.slice(0, i), '*'].join(':'),\n      ),\n    namespace,\n  ];\n\n  if (root.PEB_DEBUG\n    && root.PEB_DEBUG.split(',').find(\n      eNs => acceptableNss.includes(eNs),\n    )\n  ) {\n    return (...input) => {\n      // tslint:disable-next-line:no-console\n      console.log(\n        `%c ${namespace} `, 'background: #3078a8; color: white',\n        ...input,\n      );\n\n      return [...input];\n    };\n  }\n\n  return (...input) => [...input];\n}\n","import { isArray, isFunction, merge } from 'lodash-es';\n\nimport { PebTemplate } from '../models/client';\nimport { PebElement, PebElementId, PebElementWithParent } from '../models/element';\n\nexport function pebMapElementDeep(\n  element: PebElement,\n  handler: (el: PebElement) => PebElement,\n): PebElement {\n  const { children: children = [], ...elementProps } = handler(element);\n\n  return {\n    ...merge({}, elementProps),\n    children: children.map(child => pebMapElementDeep(child, handler)),\n  };\n}\n\nexport function pebFilterElementDeep(\n  element: PebElement,\n  handler: (el: PebElement) => boolean,\n): PebTemplate | PebElement {\n  const nextChildren = element.children?.filter(handler);\n\n  return {\n    ...merge({}, element),\n    children: nextChildren?.map(child => pebFilterElementDeep(child, handler)),\n  };\n}\n\nexport function pebTraverseElementDeep(\n  element: PebElement,\n  handler: (el: PebElement) => any,\n): void {\n  handler(merge({}, element));\n\n  if (isArray(element.children)) {\n    element.children.forEach(el => pebTraverseElementDeep(el, handler));\n  }\n}\n\nexport function pebFindElementParents(document: PebElement, id: PebElementId): PebElement[] {\n  const stack = [{ node: document, i: 0 }];\n  while (stack.length) {\n    let current = stack[stack.length - 1];\n    while (current.i < current.node.children.length) {\n      const node = current.node.children[current.i];\n\n      if (node.id === id) {\n        return stack\n          .filter(el => el.node.id !== document.id)\n          .map(el => el.node);\n      }\n\n      stack.push({ node, i: 0 });\n      current.i++;\n      current = stack[stack.length - 1];\n    }\n\n    stack.pop();\n  }\n\n  return null;\n}\n\nexport function pebFindElementChildren(\n  element: PebElement,\n  predicate?: ((e: PebElement) => boolean),\n): PebElement[] {\n  if (predicate && !isFunction(predicate)) {\n    throw new Error('Unsupported selector');\n  }\n\n  predicate = predicate || (() => true); // tslint:disable-line\n\n  const result = [];\n\n  pebTraverseElementDeep(element, el => {\n    if (predicate(el)) {\n      result.push(el);\n    }\n  });\n\n  return result;\n}\n\nexport function pebTraverseElementDeepWithParent(\n  element: PebElement,\n  handler: (el: any) => any,\n  parentId: null | string = null,\n  priority: any = -1,\n): void {\n  const nextPriority = parseInt(priority, 10) + 1;\n  handler({ ...element, parentId, priority: nextPriority });\n\n  if (isArray(element.children)) {\n    element.children.forEach(el => pebTraverseElementDeepWithParent(el, handler, element.id, nextPriority));\n  }\n}\n\nexport function pebFindElementChildrenWithParent(\n  element: PebElement,\n  predicate: ((e: PebElement) => boolean) = (() => true),\n): PebElementWithParent[] {\n  if (predicate && !isFunction(predicate)) {\n    throw new Error('Unsupported selector');\n  }\n\n  const result = [];\n\n  pebTraverseElementDeepWithParent(element, el => {\n    if (predicate(el)) {\n      result.push(el);\n    }\n  });\n\n  return result;\n}\n","import { random } from 'lodash-es';\nimport { v4 as uuid } from 'uuid';\n\n// This will allow us to detect global object both in browser and in backend\n// so in sandbox we could generate more readable ids and at the same time use\n// normal ones in production\nconst root: any = (typeof self === 'object' && self.self === self && self) ||\n  (typeof global === 'object' && global.global === global && global) ||\n  this;\n\n// const initialNamespaces = localStorage.getItem('peb-ids');\n\n// const idsNamespaces: {\n//   [ns: string]: number,\n// } = initialNamespaces ? JSON.parse(initialNamespaces) : {};\n\nexport function pebGenerateId(ns?: string): string {\n  // if (root.PEB_CUSTOM_IDS && ns) {\n  //   if (!(ns in idsNamespaces)) {\n  //     idsNamespaces[ns] = 0;\n  //   }\n\n  //   idsNamespaces[ns]++;\n\n  //   localStorage.setItem('peb-ids', JSON.stringify(idsNamespaces));\n\n  //   return `${ns}-${idsNamespaces[ns]}`;\n  // }\n\n  if (root.PEB_CUSTOM_IDS) {\n    const base = 36;\n\n    return Number(random(0, base ** 5 - 1)).toString(base);\n  }\n\n  return uuid();\n}\n","import { merge, omit } from 'lodash-es';\n\nimport { PebContextSchemaEffect } from '../../models/action';\nimport { PebContextSchema } from '../../models/client';\n\nexport const pebContextSchemaEffectHandlers: {\n  [effectName in PebContextSchemaEffect]: (schema: null | PebContextSchema, payload: PebContextSchema | string) => PebContextSchema | null\n} = {\n  [PebContextSchemaEffect.Init]: pebContextSchemaEffectInitHandler,\n  [PebContextSchemaEffect.Update]: pebContextSchemaEffectUpdateHandler,\n  [PebContextSchemaEffect.Delete]: pebContextSchemaEffectDeleteHandler,\n};\n\nexport function pebContextSchemaEffectInitHandler(_: null, payload: PebContextSchema): PebContextSchema {\n  return payload;\n}\n\nexport function pebContextSchemaEffectUpdateHandler(prevSchema: PebContextSchema, payload: PebContextSchema): PebContextSchema {\n  return merge({}, prevSchema, payload);\n}\n\nexport function pebContextSchemaEffectDeleteHandler(prevSchema: PebContextSchema, payload: string): PebContextSchema {\n  return null;\n}\n","import { PebPageEffect } from '../../models/action';\nimport { PebPageShort } from '../../models/editor';\n\nexport const pebPageEffectHandler: {\n  [effectName in PebPageEffect]: (page: null | PebPageShort, payload: any) => PebPageShort | null\n} = {\n  [PebPageEffect.Create]: pebPageEffectCreateHandler,\n  [PebPageEffect.UpdateData]: pebPageEffectUpdateDataHandler,\n  [PebPageEffect.Delete]: pebPageEffectDeleteHandler,\n};\n\nexport function pebPageEffectCreateHandler(_: null, payload: PebPageShort): PebPageShort {\n  return payload;\n}\n\nexport function pebPageEffectUpdateDataHandler(prevPage: PebPageShort, payload: any): PebPageShort {\n  return {\n    ...prevPage,\n    data: { ...prevPage.data, ...payload },\n  };\n}\n\nexport function pebPageEffectDeleteHandler(prevPage: PebPageShort, payload: any): null {\n  return null;\n}\n","import { PebShopEffect } from '../../models/action';\nimport { PebPageId } from '../../models/client';\nimport { PebShopShort } from '../../models/editor';\n\nexport const pebShopEffectHandlers: {\n  [effectName in PebShopEffect]: (prevShop: null | PebShopShort, payload: any) => PebShopShort\n} = {\n  [PebShopEffect.Init]: pebShopEffectCreateHandler,\n  [PebShopEffect.UpdateData]: pebShopEffectUpdateDataHandler,\n  [PebShopEffect.UpdatePages]: pebShopEffectUpdatePagesHandler,\n  [PebShopEffect.AppendPage]: pebShopEffectAppendPagesHandler,\n  [PebShopEffect.DeletePage]: pebShopEffectAppendPagesHandler,\n};\n\nexport function pebShopEffectCreateHandler(prevShop: null, payload: PebShopShort): PebShopShort {\n  return payload;\n}\nexport function pebShopEffectUpdateDataHandler(prevShop: PebShopShort, payload: { [key: string]: any }): PebShopShort {\n  // debugger;\n  return {\n    ...prevShop,\n    data: {\n      ...prevShop.data,\n      ...payload,\n    },\n  };\n}\nexport function pebShopEffectUpdatePagesHandler(prevShop: PebShopShort, payload: PebPageId[]): PebShopShort {\n  return {\n    ...prevShop,\n    pageIds: payload,\n  };\n}\n\nexport function pebShopEffectAppendPagesHandler(prevShop: PebShopShort, payload: PebPageId): PebShopShort {\n  return {\n    ...prevShop,\n    pageIds: [...prevShop.pageIds, payload],\n  };\n}\n\nexport function pebShopEffectDeletePagesHandler(prevShop: PebShopShort, payload: PebPageId): PebShopShort {\n  return {\n    ...prevShop,\n    pageIds: prevShop.pageIds.filter(id => id !== payload),\n  };\n}\n","import { merge } from 'lodash-es';\n\nimport { PebStylesheetEffect } from '../../models/action';\nimport { PebStylesheet } from '../../models/client';\n\nexport const pebStylesheetEffectHandlers: {\n  [effectName in PebStylesheetEffect]: (\n    stylesheet: null | PebStylesheet,\n    payload: PebStylesheet | string,\n  ) => PebStylesheet | null\n} = {\n  [PebStylesheetEffect.Init]: pebStylesheetInitHandler,\n  [PebStylesheetEffect.Update]: pebStylesheetUpdateHandler,\n  [PebStylesheetEffect.Delete]: pebStylesheetDeleteHandler,\n};\n\nexport function pebStylesheetInitHandler(_: null, payload: PebStylesheet): PebStylesheet {\n  return payload;\n}\n\nexport function pebStylesheetUpdateHandler(prevState: PebStylesheet, payload: PebStylesheet): PebStylesheet {\n  return merge(\n    {},\n    prevState,\n    payload,\n  );\n}\n\nexport function pebStylesheetDeleteHandler(): PebStylesheet {\n  return null;\n}\n","import { PebTemplateEffect } from '../../models/action';\nimport { PebTemplate } from '../../models/client';\nimport { PebElement } from '../../models/element';\nimport { pebFilterElementDeep, pebMapElementDeep } from '../../utils/element-utils';\n\nexport const layoutsScopeName = 'layouts';\n\nexport interface PebAppendElementPayload {\n  to: string;\n  after?: string;\n  element: PebElement;\n}\n\nexport const pebLayoutEffectHandlers: {\n  [effectName in PebTemplateEffect]: (prevLayout: null| PebTemplate, payload: any) => PebTemplate | null\n} = {\n  [PebTemplateEffect.Init]: pebLayoutInitHandler,\n  [PebTemplateEffect.Destroy]: pebLayoutDestroyHandler,\n  [PebTemplateEffect.AppendElement]: pebLayoutAppendElementHandler,\n  [PebTemplateEffect.UpdateElement]: pebLayoutUpdateElementHandler,\n  [PebTemplateEffect.RelocateElement]: pebLayoutRelocateElementHandler,\n  [PebTemplateEffect.DeleteElement]: pebLayoutDeleteElementHandler,\n};\n\nexport function pebLayoutInitHandler(prevLayout: null, payload: PebTemplate) {\n  return payload;\n}\n\nexport function pebLayoutDestroyHandler(prevLayout: null | PebTemplate) {\n  return null;\n}\n\nexport function pebLayoutAppendElementHandler(prevLayout: PebTemplate, payload: PebAppendElementPayload): PebTemplate {\n  return pebMapElementDeep(\n    prevLayout,\n    el => (el.id === payload.to ? { ...el, children: [...el.children, payload.element] } : el),\n  ) as PebTemplate;\n}\n\nexport function pebLayoutUpdateElementHandler(prevLayout: PebTemplate, payload: any) {\n  throw new Error('To implement');\n  return prevLayout;\n}\n\nexport function pebLayoutRelocateElementHandler(prevLayout: PebTemplate, payload: any) {\n  throw new Error('To implement');\n  return prevLayout;\n}\n\nexport function pebLayoutDeleteElementHandler(prevLayout: PebTemplate, payload: string): PebTemplate {\n  return pebFilterElementDeep(prevLayout, c => c.id !== payload) as PebTemplate;\n}\n","import { omit } from 'lodash-es';\n\nimport { PebAction, PebEffectTarget } from '../models/action';\nimport { PebShopThemeSnapshotEntity } from '../models/database';\nimport { pebContextSchemaEffectHandlers } from './effects/context-schema.effects';\nimport { pebPageEffectHandler } from './effects/page.effects';\nimport { pebShopEffectHandlers } from './effects/shop.effects';\nimport { pebStylesheetEffectHandlers } from './effects/stylesheet.effects';\nimport { pebLayoutEffectHandlers } from './effects/template.effects';\n\nconst createInitialShopSnapshot = (): PebShopThemeSnapshotEntity => ({\n  // TODO: is hash needed???\n  id: null,\n  shop: null,\n  pages: {},\n  templates: {},\n  stylesheets: {},\n  contextSchemas: {},\n});\n\nconst effectHandlers = {\n  ...pebShopEffectHandlers,\n  ...pebPageEffectHandler,\n  ...pebLayoutEffectHandlers,\n  ...pebStylesheetEffectHandlers,\n  ...pebContextSchemaEffectHandlers,\n};\n\nexport function pebActionHandler(input: PebShopThemeSnapshotEntity, action: PebAction): PebShopThemeSnapshotEntity {\n  return action.effects.reduce((prevState, effect) => {\n    const [areaName, areaId] = effect.target.split(':') as [ string, string ];\n    const handler = effectHandlers[effect.type];\n\n    if (!handler) {\n      throw new Error('Invalid effect type');\n    }\n\n    const collectionNames = Object.values(PebEffectTarget) as string[];\n\n    // TODO: Check if Maps are deeply copied\n    if (areaName === PebEffectTarget.Shop) {\n      // debugger;\n      return {\n        ...prevState,\n        shop: handler(prevState.shop as any, effect.payload),\n      } as any; // FIXME: Type??\n    } else if (collectionNames.includes(areaName)) {\n      const prevUnit = prevState[areaName][areaId] || null;\n      const nextUnit = handler(prevUnit, effect.payload);\n\n      const nextArea = Boolean(nextUnit)\n        ? { ...prevState[areaName], [areaId]: nextUnit }\n        : omit(prevState[areaName], areaId) as any;\n\n      return {\n        ...prevState,\n        [areaName]: nextArea,\n      };\n    }\n\n    throw new Error('Invalid effect target');\n  }, input);\n}\n\nexport const pebCompileActions = (actions: PebAction[]): PebShopThemeSnapshotEntity =>\n  actions.reduce(pebActionHandler, createInitialShopSnapshot());\n","import { PebScreen } from '../constants';\nimport {\n  PebAction,\n  PebContextSchemaEffect,\n  PebEffectTarget,\n  PebPageEffect,\n  PebShopEffect,\n  PebStylesheetEffect,\n  PebTemplateEffect,\n} from '../models/action';\nimport { PebShop } from '../models/client';\nimport { pebGenerateId } from '../utils/generate-id';\n\n// TODO: Properly handle shop with multiple pages\nexport const pebCreateShopInitAction = (shop: PebShop): PebAction => {\n  const page = shop.pages[0];\n\n  const shopContextId = pebGenerateId('context');\n\n  const pageTemplateId = pebGenerateId('template');\n  const stylesIds = {\n    [PebScreen.Desktop]: pebGenerateId('stylesheet'),\n    [PebScreen.Tablet]: pebGenerateId('stylesheet'),\n    [PebScreen.Mobile]: pebGenerateId('stylesheet'),\n  };\n  const pageContextId = pebGenerateId('context');\n\n  return {\n    id: pebGenerateId('action'),\n    createdAt: new Date(),\n    effects: [\n      {\n        type: PebTemplateEffect.Init,\n        target: `${PebEffectTarget.Templates}:${pageTemplateId}`,\n        payload: page.template,\n      },\n      ...Object.values(PebScreen).map(screen => ({\n        type: PebStylesheetEffect.Init,\n        target: `${PebEffectTarget.Stylesheets}:${stylesIds[screen]}`,\n        payload: page.stylesheets[screen],\n      })),\n      {\n        type: PebContextSchemaEffect.Init,\n        target: `${PebEffectTarget.ContextSchemas}:${pageContextId}`,\n        payload: page.context,\n      },\n      {\n        type: PebPageEffect.Create,\n        target: `${PebEffectTarget.Pages}:${page.id}`,\n        payload: {\n          id: page.id,\n          type: page.type,\n          variant: page.variant,\n          master: page.master,\n          name: page.name,\n          data: page.data,\n          templateId: pageTemplateId,\n          stylesheetIds: {\n            [PebScreen.Desktop]: `${stylesIds[PebScreen.Desktop]}`,\n            [PebScreen.Tablet]: `${stylesIds[PebScreen.Tablet]}`,\n            [PebScreen.Mobile]: `${stylesIds[PebScreen.Mobile]}`,\n          },\n          contextId: `${pageContextId}`,\n        },\n      },\n      {\n        type: PebContextSchemaEffect.Init,\n        target: `${PebEffectTarget.ContextSchemas}:${shopContextId}`,\n        payload: {},\n      },\n      {\n        type: PebShopEffect.Init,\n        target: PebEffectTarget.Shop,\n        payload: {\n          data: {\n            frontPageId: page.id,\n          },\n          contextId: shopContextId,\n          pageIds: [page.id],\n        },\n      },\n    ],\n  };\n};\n","import { ContextSchemaItem, PebContextSchema, PebElementStyles } from '../models/client';\nimport { PebElement, PebElementType } from '../models/element';\nimport { pebGenerateId } from '../utils/generate-id';\n\ntype ElementPayload = Partial<PebElement> & ({ type: PebElementType });\n\nexport interface PebElementKit {\n  element: PebElement;\n  styles: { [screenId: string]: PebElementStyles };\n  contextSchema: PebContextSchema;\n}\n\n// TODO: Delete after 25.04 if not used\nexport const pebCreateElementKit = (\n  elementPayload: ElementPayload,\n  styles?: { [screen: string]: PebElementStyles },\n  contextItem?: ContextSchemaItem,\n): PebElementKit => {\n  const element = {\n    ...elementPayload,\n    id: pebGenerateId(),\n  };\n\n  return {\n    element,\n    styles,\n    contextSchema: {\n      [element.id]: contextItem,\n    },\n  };\n};\n","import { PebScreen } from '../constants';\nimport { PebPage, PebPageType, PebPageVariant, PebShop, PebTemplate } from '../models/client';\nimport { PebElementType } from '../models/element';\nimport { pebGenerateId } from '../utils/generate-id';\nimport { random } from 'lodash-es';\n\nexport const pebCreateEmptyPage = (name, type: PebPageType = PebPageType.Replica, variant = PebPageVariant.Default): PebPage => {\n\n  const line = {\n    id: pebGenerateId(),\n    type: PebElementType.Line,\n  };\n\n  const template: PebTemplate = {\n    id: pebGenerateId('element'),\n    type: PebElementType.Document,\n    children: ['header', 'body', 'footer'].map(sectionName => ({\n      id: pebGenerateId('element'),\n      type: PebElementType.Section,\n      data: { name: sectionName },\n      meta: { deletable: false },\n      children: [\n        ...(sectionName === 'header' ? [\n          {\n            id: pebGenerateId('element'),\n            type: PebElementType.Block,\n            children: [\n              {\n                id: pebGenerateId('element'),\n                type: PebElementType.Text,\n                data: {\n                  text: name,\n                },\n              },\n            ],\n          },\n        ] : []),\n      ],\n    })),\n  };\n\n  const [headerId, bodyId, footerId] = template.children.map(el => el.id);\n  const headerBlockId = template.children[0].children[0].id;\n  const blockColor = '#' + Number(random(0, 16 ** 6)).toString(16);\n\n  return  {\n    id: pebGenerateId('page'),\n    name,\n    type,\n    variant,\n    master: null,\n    data: {\n      url: '/',\n      mark: null,\n    },\n    template,\n    stylesheets: {\n      [PebScreen.Desktop]: {\n        [headerId]: { height: 200 },\n        [bodyId]: { height: 600 },\n        [footerId]: { height: 200 },\n        [headerBlockId]: {\n          height: 150,\n          width: 150,\n          backgroundColor: blockColor,\n        },\n        [line.id]: {height: 2},\n      },\n      [PebScreen.Tablet]: {\n        [headerId]: { height: 200 },\n        [bodyId]: { height: 600 },\n        [footerId]: { height: 200 },\n        [headerBlockId]: {\n          height: 150,\n          width: 150,\n          backgroundColor: blockColor,\n        },\n        [line.id]: {height: 2},\n      },\n      [PebScreen.Mobile]: {\n        [headerId]: { height: 200 },\n        [bodyId]: { height: 600 },\n        [footerId]: { height: 200 },\n        [headerBlockId]: {\n          height: 150,\n          width: 150,\n          backgroundColor: blockColor,\n        },\n        [line.id]: {height: 2},\n      },\n    },\n    context: {},\n  };\n};\n\nexport function pebCreateEmptyShop(): PebShop {\n  const frontPage = pebCreateEmptyPage('Front');\n\n  return {\n    id: pebGenerateId(),\n    data: {\n      frontPageId: frontPage.id,\n    },\n    routing: {\n      '/': frontPage.id,\n    },\n    context: {},\n    pages: [frontPage],\n  };\n}\n"],"names":["PebEffectTarget","PebShopEffect","PebPageEffect","PebTemplateEffect","PebStylesheetEffect","PebContextSchemaEffect","PebPageType","PebPageVariant","ContextService","InjectionToken","PebElementType","PebMakerType","PebElementContextState","PebScreen","ReplaySubject","this","merge","isArray","isFunction","root","random","uuid","_a","omit"],"mappings":"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"}